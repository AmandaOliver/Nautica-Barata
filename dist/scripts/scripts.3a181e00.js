"use strict";var nauticaBarataApp=angular.module("nauticaBarataApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngCart"]);nauticaBarataApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/index.html",controller:"prodCtrl"}).when("/cart",{templateUrl:"views/cart.html",controller:""}).when("/checkout",{templateUrl:"views/checkout.html",controller:""}).when("/venta",{templateUrl:"views/venta.html",controller:"homeController"}).when("/login",{templateUrl:"views/login.html",controller:"loginController"}).when("/shop",{templateUrl:"views/shop.html",controller:""}).when("/product-details",{templateUrl:"views/product.html",controller:"prodCtrl"}).when("/404",{templateUrl:"views/404.html",controller:""}).when("/contact-us",{templateUrl:"views/contact-us.html",controller:""}).when("/c-env",{templateUrl:"views/condiciones-envio.html",controller:""}).when("/horario-com",{templateUrl:"views/horario.html",controller:""}).when("/privacidad",{templateUrl:"views/privacidad.html",controller:""}).when("/cond-generales",{templateUrl:"views/condiciones-generales.html",controller:""}).when("/Cuenta",{templateUrl:"views/cuenta.html",controller:"homeController"}).otherwise({redirectTo:"/"})}]),nauticaBarataApp.controller("cartCtrl",["$scope","$http","ngCart",function(a,b,c){c.setTaxRate(7.5),c.setShipping(2.99),console.log(c),a.checkout=function(){a.summary=c.toObject()}}]),nauticaBarataApp.factory("auth",["$cookies","$cookieStore","$location",function(a,b,c){return{login:function(b,d){a.username=b,a.password=d,c.path("/index")},logout:function(){b.remove("username"),b.remove("password"),$scope.username=a.username,c.path("/login")},checkStatus:function(){var b=["/Cuenta"];this.in_array(c.path(),b)&&"undefined"==typeof a.username&&(alert("Para administrar la cuenta tienes que iniciar sesion"),c.path("/login")),this.in_array("/login",b)&&"undefined"!=typeof a.username&&c.path("/index")},in_array:function(a,b){var c="";for(c in b)if(b[c]==a)return!0;return!1}}}]),nauticaBarataApp.run(["$http",function(a){a.get("scripts/users.json").success(function(a){users.items=a})}]);var users={};nauticaBarataApp.controller("loginController",["$scope","auth",function(a,b){a.users=users,a.login=function(){var c=!1;a.encontrado=!1,angular.forEach(a.users.items,function(b){b.username==a.username&&b.password==a.password&&(c=!0)}),0==c?a.encontrado=!0:b.login(a.username,a.password)},a.addUser=function(b){var c=!0;angular.forEach(a.users.items,function(a){a.username==b.username&&(c=!1)}),1==c&&(users.items.push({username:b.username,password:b.password}),alert("registrado con existo")),0==c&&(a.valido=!0)}}]),nauticaBarataApp.controller("homeController",["$scope","$cookies","auth",function(a,b,c){a.users=users,a.username=b.username,a.password=b.password,a.changePassword=function(c){var d=!1;c.password==c.password2&&(d=!0),1==d&&angular.forEach(a.users.items,function(a){a.username==b.username&&(a.password=c.password)}),alert("contrase√±a cambiada")},a.logout=function(){c.logout()}}]),nauticaBarataApp.run(["$rootScope","auth",function(a,b){a.$on("$routeChangeStart",function(){b.checkStatus()})}]);var productos={};nauticaBarataApp.run(["$http",function(a){a.get("scripts/productos.json").success(function(a){productos.items=a})}]),nauticaBarataApp.filter("checkedProd",function(){return function(a){var b=[];return angular.forEach(a,function(a,c){(0==a.done||1==c)&&b.push(a)}),b}}),nauticaBarataApp.controller("prodCtrl",["$scope","auth",function(a){a.productos=productos}]);